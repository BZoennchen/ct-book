
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>6.6. Rekursive Funktionen &#8212; Computational Thinking</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="6.7. First-Class-Funktion" href="6-first-class-functions.html" />
    <link rel="prev" title="6.5. Umschlossene Funktionen" href="5-nested-functions.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      <img src="../../_static/logo-HM.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Computational Thinking</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   Computational Thinking
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Einleitung
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01-1/course.html">
   1. Kurskonzept
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-1/1-teaching.html">
     1.1. Lehrkonzept
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-1/2-learn-how-to-think.html">
     1.2. Denken lernen?
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01-2/what-is-ct.html">
   2. Was ist Computational Thinking?
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-2/1-informatics-and-ct.html">
     2.1. Informatik und CT
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-2/2-repetition-is-the-key.html">
     2.2. Wiederholung als Grundlage
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01-3/history.html">
   3. Geschichte der Computer und Algorithmen
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-3/1-ancient.html">
     3.1. Antike
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-3/2-middleages.html">
     3.2. Mittelalter bis 19. Jahrundert
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-3/3-today.html">
     3.3. 19. Jahrundert bis heute
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-3/4-future.html">
     3.4. Ausblick
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01-4/why-ct.html">
   4. Warum Computational Thinking?
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-4/1-intrinsic-value.html">
     4.1. Intrinsischer Wert
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-4/2-usefulness.html">
     4.2. Langfristiger Nutzen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-4/3-self-determination.html">
     4.3. Selbstbestimmt durch CT
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01-5/sorting.html">
   5. Lasst uns Denken
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-5/1-sort-cards.html">
     5.1. Karten sortieren
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-5/2-sort-cards-with-python.html">
     5.2. Karten sortieren in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-5/3-sort-numbers.html">
     5.3. Zahlen sortieren in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01-5/4-sort-anything.html">
     5.4. Allgemeines Sortieren in Python
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Theorie
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02-1/information-processing.html">
   1. Der digitale Computer
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-1/1-basics.html">
     1.1. Grundlagen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-1/2-interpretation.html">
     1.2. Interpretation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-1/2-representation.html">
     1.3. Repr√§sentationen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-1/3-manipulation.html">
     1.4. Manipulation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-1/4-information-flow.html">
     1.5. Der Informationskreislauf
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-1/5-hardware-equals-software.html">
     1.6. Berechenbarkeit
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02-2/information.html">
   2. Was ist Information?
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-2/1-natural-science.html">
     2.1. Naturwissenschaften
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-2/2-formal-science.html">
     2.2. Strukturwissenschaften
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-2/3-critic.html">
     2.3. Kritik
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-2/4-humanics.html">
     2.4. Geisteswissenschaften
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-2/5-summary.html">
     2.5. Zusammenfassung
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02-3/languages.html">
   3. Programmiersprachen
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-3/1-abstraction.html">
     3.1. Abstraktion des Computers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-3/2-success-criteria.html">
     3.2. Erfolgsfaktoren
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-3/3-imperative-vs-functional.html">
     3.3. Imperativ vs. funktional
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-3/4-language-evolution.html">
     3.4. Sprachevolution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-3/5-python.html">
     3.5. Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-3/6-diversity.html">
     3.6. Diversit√§t
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02-4/the-art-of-programming.html">
   4. Die Kunst des Programmierens
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-4/1-algorithms.html">
     4.1. Algorithmen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-4/2-programming.html">
     4.2. Programmieren
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-4/3-code.html">
     4.3. Programmiercode
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02-4/4-repetition-and-recursion.html">
     4.4. Wiederholung
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Python
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../03-1/introduction.html">
   1. Programmieren in Python
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03-2/python-environment.html">
   2. Das Python √ñkosystem
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-2/1-installation.html">
     2.1. Installation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-2/2-run.html">
     2.2. Python ausf√ºhren
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-2/3-notebooks.html">
     2.3. Jupyter Notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-2/4-modules.html">
     2.4. Module
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03-3/intro.html">
   3. Variablen, Ausdr√ºcke und Funktionsaufrufe
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-3/1-variables.html">
     3.1. Variablen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-3/2-expressions.html">
     3.2. Ausdr√ºcke
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-3/3-invoking-functions.html">
     3.3. Funktionsaufrufe
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03-4/intro.html">
   4. Datentypen (Grundlagen)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-4/1-data-types.html">
     4.1. Pythons Datentypen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-4/2-int.html">
     4.2. Ganze Zahlen - int
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-4/3-float.html">
     4.3. Flie√ükommazahlen - float
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-4/4-bool.html">
     4.4. Wahrheitswerte - bool
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-4/5-list.html">
     4.5. Listen - list
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-4/6-tuple.html">
     4.6. Tupel - tuple
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-4/7-string.html">
     4.7. Zeichenketten - str
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-4/8-set.html">
     4.8. Mengen - set
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-4/9-dict.html">
     4.9. W√∂rterb√ºcher - dict
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-4/10-range.html">
     4.10. Zahlenbereich - range
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-4/11-typing-in-python.html">
     4.11. Pythons Typisierung
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03-5/intro.html">
   5. Datentypen (Fortsetzung)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-5/1-type-systems.html">
     5.1. Dynamische und statische Typisierung
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-5/2-why-data-types.html">
     5.2. Existenzberechtigung
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-5/3-change-of-interpretation.html">
     5.3. Interpretationswechsel
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-5/4-kind-of-data-types.html">
     5.4. Arten von Datentypen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-5/5-primitive-data-types.html">
     5.5. Primitive Datentypen in Python?
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="intro.html">
   6. Funktionen
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="1-purity.html">
     6.1. Reinheit
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2-definition.html">
     6.2. Grundlagen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="3-namespaces.html">
     6.3. Namensr√§ume und Sichtbarkeit
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="4-lambdas.html">
     6.4. Anonyme Funktionen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="5-nested-functions.html">
     6.5. Umschlossene Funktionen
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     6.6. Rekursive Funktionen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="6-first-class-functions.html">
     6.7. First-Class-Funktion
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03-7/intro.html">
   7. Kontrollstrukturen
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-7/1-cases.html">
     7.1. Fallunterscheidungen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-7/2-loops.html">
     7.2. Schleifen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-7/3-comprehensions.html">
     7.3. Comprehensions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03-8/intro.html">
   8. Objektorientierte Programmierung
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-8/1-class-and-objects.html">
     8.1. Klassen und Objekte
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03-8/2-inheritance-poly-encap.html">
     8.2. Vererbung, Kapselung und Polymorphie
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  CT in Aktion
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../04/robo-world.html">
   1. Roboterwelt
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04/dive-bell.html">
   2. Sprechen in der Taucherglocke
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04/image-representation.html">
   3. Bin√§res Zeichnen - Struktur ist Information
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04/memory.html">
   4. Speicher - alles ist eine Liste
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04/name-register.html">
   5. Namensregister
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendix
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/bibliography.html">
   Bibliography
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="../../_sources/chapters/03-6/x-recursion.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/chapters/03-6/x-recursion.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/BZoennchen/ct-book/master?urlpath=tree/chapters/03-6/x-recursion.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#stack-und-heap">
   6.6.1. Stack und Heap
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#laufzeit">
   6.6.2. Laufzeit
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#endrekursionen-in-python">
   6.6.3. Endrekursionen (in Python?)
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="rekursive-funktionen">
<span id="sec-recursive-functions"></span><h1><span class="section-number">6.6. </span>Rekursive Funktionen<a class="headerlink" href="#rekursive-funktionen" title="Permalink to this headline">¬∂</a></h1>
<p>Bevor Sie fortfahren sollten Sie sich den Abschnitt <a class="reference internal" href="../02-4/4-repetition-and-recursion.html#sec-repetition-and-recursion"><span class="std std-ref">Wiederholung</span></a> durchgelesen haben.</p>
<p>Wir werden in diesem Abschnitt nicht √ºber Rekursion an sich sprechen, sondern wie <em>rekursive Funktionen</em> in den allermeisten Programmiersprachen realisiert werden.
Wie realisiert der Computer rekursion?
Was passiert bei einem rekursiven Aufruf?
Und was sind √ºberhaupt <em>rekursive Funktionen</em>?</p>
<div class="admonition-rekursive-funktionen admonition">
<p class="admonition-title">Rekursive Funktionen</p>
<p>Als <em>rekursive Funktion</em> wird eine Funktion bezeichnet, welche sich selbst f√ºr bestimmte Argumente aufruft.</p>
</div>
<p>Die folgende Berechnung der Fakult√§t ist eine rekursive Funktion, welche wir bereits eingef√ºhrt haben.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fac</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>    <span class="c1"># Base cases!</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>         <span class="c1"># Recursive case</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">fac</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Recursive call </span>

<span class="n">fac</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>24
</pre></div>
</div>
</div>
</div>
<p>Damit eine rekursive Funktion terminiert ben√∂tigt sie mindestens einen <em>Basisfall</em>, d.h. einen Pfad an Anweisungen, welcher <strong>keinen</strong> Funktionsaufruf der Funktion selbst enth√§lt.
Das ist eine notwendige aber noch nicht hinreichende Bedingung.
Um formal zu beweisen, dass eine rekursive Funktion terminiert und auch das richtig berechnet, verwendet man die sog. <em>Induktion</em>.</p>
<p>Im obigen Fall sehen wir recht schnell, dass alles korrekt ablaufen sollte, sofern <code class="docutils literal notranslate"><span class="pre">n</span></code> eine nat√ºrliche Zahl ist.
Da wir <code class="docutils literal notranslate"><span class="pre">n</span></code> bei jedem rekursiven Aufruf um 1 verkleinern, muss irgendwann die <code class="docutils literal notranslate"><span class="pre">if</span></code>-Bedingung zutreffen.
In anderen Worten kommen wir immer irgendwann in den <em>Basisfall</em>!</p>
<p>Wie aber werden die Variablen der unterschiedlichen Funktionsaufrufe verwaltet?
Gibt es nur ein einzelnes <code class="docutils literal notranslate"><span class="pre">n</span></code>, welches von allen Funktionsaufrufen verwendet wird?
Dieser Punkt ist √§u√üerst wichtig.
Lassen Sie uns den Funktionsaufruf <code class="docutils literal notranslate"><span class="pre">fac(4)</span></code> einmal ‚Äòausbreite‚Äô:
<code class="docutils literal notranslate"><span class="pre">fac(4)</span></code> wird zu <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">*</span> <span class="pre">fac(3)</span></code> wird zu <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">*</span> <span class="pre">fac(2)</span></code> wird zu <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">*</span> <span class="pre">3</span> <span class="pre">*</span> <span class="pre">fac(1)</span></code> wird schlie√ülich zu <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">*</span> <span class="pre">3</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">1</span></code>.</p>
<div class="section" id="stack-und-heap">
<h2><span class="section-number">6.6.1. </span>Stack und Heap<a class="headerlink" href="#stack-und-heap" title="Permalink to this headline">¬∂</a></h2>
<p>Es ist √§u√üerst wichtig zu begreifen, dass bei jedem rekursiven Aufruf ein neuer <a class="reference internal" href="3-namespaces.html#sec-local-namespace"><span class="std std-ref">lokaler Namensraum</span></a> er√∂ffnet wird!
Das bedeutet, jeder Funktionsaufruf verwendet einen frischen Satz an Variablen.
Dieser Namensraum befindet sich auf dem sog. <em>Stack</em>, zu deutsch <em>Stapel</em>.</p>
<div class="admonition-stack-arbeitsspeicher admonition" id="def-stack">
<p class="admonition-title">Stack (Arbeitsspeicher)</p>
<p>Der <em>Stack</em> ist ein spezieller Bereich des Arbeitsspeichers, auf welchem die Variablen des lokalen Namensraums liegen.
Bei jedem Funktionsaufruf wird ein Namensraum automatisch auf den Stack gelegt und bei jedem R√ºcksprung (<code class="docutils literal notranslate"><span class="pre">return</span></code>) wird der entsprechende Namensraum automatisch vom Stack gel√∂scht.</p>
</div>
<p>Immer wenn wir <code class="docutils literal notranslate"><span class="pre">fac</span></code> aufrufen, wird ein neuer lokaler Namensraum auf den Stack gelegt.
Dieser enth√§lt die Variable <code class="docutils literal notranslate"><span class="pre">n</span></code>.
Da die Funktionen rekursiv aufgerufen werden, f√ºllt sich der Stack bis wir uns im Aufruf von <code class="docutils literal notranslate"><span class="pre">fac(1)</span></code> befinden.</p>
<div class="figure align-default" id="fig-stack-fill">
<a class="reference internal image-reference" href="../../_images/stack_fill.png"><img alt="../../_images/stack_fill.png" src="../../_images/stack_fill.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 6.1 </span><span class="caption-text">Bef√ºllung des <em>Stacks</em> durch den Aufruf der <em>rekursiven Funktion</em> <code class="docutils literal notranslate"><span class="pre">fac(4)</span></code>.</span><a class="headerlink" href="#fig-stack-fill" title="Permalink to this image">¬∂</a></p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">fac(1)</span></code> gelangt in den <em>Basisfall</em> und beendet die Rekursionskette.
Es lie√üt sein <code class="docutils literal notranslate"><span class="pre">n</span></code> aus seinem Namensraum (in <a class="reference internal" href="#fig-stack-fill"><span class="std std-numref">Abbildung 6.1</span></a> ist das der <code class="docutils literal notranslate"><span class="pre">namespace4</span></code>), pr√ºft <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&lt;=</span> <span class="pre">1</span></code> und liefert <code class="docutils literal notranslate"><span class="pre">1</span></code> zur√ºck.
Durch diesen R√ºcksprung, wird der Namensraum gel√∂scht und der n√§chste Namensraum auf dem <em>Stack</em> definiert den Namensraum des aktuellen Funktionsaufrufs.
In diesem hat <code class="docutils literal notranslate"><span class="pre">n</span></code> den Wert <code class="docutils literal notranslate"><span class="pre">2</span></code> und wir befinden uns bereits an der Stelle <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">n</span> <span class="pre">*</span> <span class="pre">fac(1)</span></code> und da <code class="docutils literal notranslate"><span class="pre">fac(1)</span></code> soeben den Wert <code class="docutils literal notranslate"><span class="pre">1</span></code> zur√ºckgeliefert hat, wird dieser Ausdruck zu <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">n</span> <span class="pre">*</span> <span class="pre">1</span></code> und somit zu <code class="docutils literal notranslate"><span class="pre">return</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">1</span></code>.</p>
<p>Sukzessive leert sich der Stack.</p>
<div class="figure align-default" id="fig-stack-clear">
<a class="reference internal image-reference" href="../../_images/stack_clear.png"><img alt="../../_images/stack_clear.png" src="../../_images/stack_clear.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 6.2 </span><span class="caption-text">Der <em>Stacks</em> leert sich beim R√ºcksprung.</span><a class="headerlink" href="#fig-stack-clear" title="Permalink to this image">¬∂</a></p>
</div>
<p>Wann immer eine Funktion aufgerufen wird (egal ob rekursiv oder nicht) wird oben auf dem Stack ein Speicherblock f√ºr den lokalen Namensraum reserviert und wann immer die Funktion terminiert/zur√ºckspringt der Speicherblock wird wieder freigegeben.
Der Zugriff auf den Stack ist schnell, da die Reservierung und das Freigeben wenig Verwaltungsinformation ben√∂tigt.
Au√üerdem ist der Stack ein zusammenh√§ngender Speicherbereich, d.h., aufeinanderfolgende Zugriffe ben√∂tigen naheliegende Speicherbereiche.</p>
<div class="hint admonition">
<p class="admonition-title">Stack und Funktionsaufrufe</p>
<p>Damit wir als Programmierer*innen nicht vor der Entscheidung stehen einen Codeblock nicht in eine Funktion auszulagern, da sich dadurch die Laufzeit verschlechtert, muss der <em>Stack</em> sehr effizient sein!</p>
</div>
<p>Die Gr√∂√üe des <em>Stacks</em> ist einen bestimmte Anzahl an Byte begrenzt.
Ist unsere Rekursion zu tief, l√§uft dieser Speicher voll:</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fac</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">RecursionError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="n">c0f4a2ba333e</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">fac</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>

<span class="nn">&lt;ipython-input-1-452caf8b0569&gt;</span> in <span class="ni">fac</span><span class="nt">(n)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>         <span class="k">return</span> <span class="mi">1</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="k">else</span><span class="p">:</span>         <span class="c1"># Recursive case</span>
<span class="ne">----&gt; </span><span class="mi">5</span>         <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">fac</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Recursive call</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> 
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="n">fac</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="o">...</span> <span class="n">last</span> <span class="mi">1</span> <span class="n">frames</span> <span class="n">repeated</span><span class="p">,</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">frame</span> <span class="n">below</span> <span class="o">...</span>

<span class="nn">&lt;ipython-input-1-452caf8b0569&gt;</span> in <span class="ni">fac</span><span class="nt">(n)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>         <span class="k">return</span> <span class="mi">1</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="k">else</span><span class="p">:</span>         <span class="c1"># Recursive case</span>
<span class="ne">----&gt; </span><span class="mi">5</span>         <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">fac</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Recursive call</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> 
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="n">fac</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="ne">RecursionError</span>: maximum recursion depth exceeded in comparison
</pre></div>
</div>
</div>
</div>
<p>Wir k√∂nnen die maximale erlaubte Rekursionstiefe auch anpassen:</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setrecursionlimit</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">)</span>

<span class="n">fac</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Der andere Speicherbereich, welcher nicht zum <em>Stack</em> geh√∂rt, bezeichnen wir als <em>Heap</em>.</p>
<div class="admonition-heap-arbeitsspeicher admonition" id="def-heap">
<p class="admonition-title">Heap (Arbeitsspeicher)</p>
<p>Der <em>Heap</em> ist ein Speicherbereich f√ºr die <em>dynamische Speicherverwaltung</em>.
Anders als beim <em>Stack</em> gibt es kein Muster mit dem der <em>Heap</em> gef√ºllt bzw. geleert werden muss.</p>
</div>
<p>Im den <em>Heap</em> kann man kreuz und quer Speicher reservieren und freigeben.
Das macht die Verwaltung des <em>Heaps</em> komplexer.
Im vergleich zum <em>Stack</em> ist es deutlich aufwendiger zu protokollieren, welche Speicherbereiche frei und welche belegt sind.</p>
</div>
<div class="section" id="laufzeit">
<h2><span class="section-number">6.6.2. </span>Laufzeit<a class="headerlink" href="#laufzeit" title="Permalink to this headline">¬∂</a></h2>
<p>Obwohl der <em>Stack</em> enorm effizient ist, sind iterative L√∂sungen fast immer schneller in ihrer Ausf√ºhrung.
√úbersetzten wir den Code in Maschinencode, also in die niedrigste bzw. konkreteste Form, so ben√∂tigen rekursive L√∂sungen fast immer mehr Sprungbefehle.</p>
<p>Auch ben√∂tigt ein Funktionsaufruf mehr Ressourcenmanagement als ein Sprung zum Anfang einer Schleife.
Vergleichen wir unsere rekursive L√∂sung mit der iterativen:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fac_it</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
<p>Die iterative L√∂sung verwendet lediglich drei Variablen n√§mlich <code class="docutils literal notranslate"><span class="pre">n</span></code>, <code class="docutils literal notranslate"><span class="pre">i</span></code> und <code class="docutils literal notranslate"><span class="pre">result</span></code>, wohingegen wir bei der rekursiven L√∂sung f√ºr <code class="docutils literal notranslate"><span class="pre">fac(n)</span></code> ca. <code class="docutils literal notranslate"><span class="pre">n</span></code> Variablen ben√∂tigen.</p>
<p>Zus√§tzlich sind <a class="reference internal" href="../02-1/4-information-flow.html#def-cpu"><span class="std std-ref">CPU‚Äôs</span></a> in der von <a class="reference internal" href="../02-1/4-information-flow.html#sec-von-neumann"><span class="std std-ref">Neumann Architektur</span></a> auf Schleifen optimiert.
R√ºckspr√ºnge kann die CPU nur vorhersagen, wenn es von ihnen nicht zu viele hintereinander gibt.
Dazu verwendet die CPU einen begrenzten Speicher.
L√§uft dieser voll, schl√§gt die Vorhersage fehl und die Ausf√ºhrungszeit verl√§ngert sich drastisch.</p>
<p>Lassen Sie uns die Laufzeiten der beiden Implementierungen vergleichen:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> fac_it(5000)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>395 ¬µs ¬± 184 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> fac(5000)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">RecursionError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">892</span><span class="n">bdcd3880a</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">run_line_magic</span><span class="p">(</span><span class="s1">&#39;timeit&#39;</span><span class="p">,</span> <span class="s1">&#39;fac(5000)&#39;</span><span class="p">)</span>

<span class="nn">~/Development/workspaces/python3env/lib/python3.9/site-packages/IPython/core/interactiveshell.py</span> in <span class="ni">run_line_magic</span><span class="nt">(self, magic_name, line, _stack_depth)</span>
<span class="g g-Whitespace">   </span><span class="mi">2334</span>                 <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;local_ns&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_local_scope</span><span class="p">(</span><span class="n">stack_depth</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2335</span>             <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">builtin_trap</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">2336</span>                 <span class="n">result</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2337</span>             <span class="k">return</span> <span class="n">result</span>
<span class="g g-Whitespace">   </span><span class="mi">2338</span> 

<span class="nn">&lt;decorator-gen-53&gt;</span> in <span class="ni">timeit</span><span class="nt">(self, line, cell, local_ns)</span>

<span class="nn">~/Development/workspaces/python3env/lib/python3.9/site-packages/IPython/core/magic.py</span> in <span class="ni">&lt;lambda&gt;</span><span class="nt">(f, *a, **k)</span>
<span class="g g-Whitespace">    </span><span class="mi">185</span>     <span class="c1"># but it&#39;s overkill for just that one bit of state.</span>
<span class="g g-Whitespace">    </span><span class="mi">186</span>     <span class="k">def</span> <span class="nf">magic_deco</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">187</span>         <span class="n">call</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">k</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">k</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">188</span> 
<span class="g g-Whitespace">    </span><span class="mi">189</span>         <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>

<span class="nn">~/Development/workspaces/python3env/lib/python3.9/site-packages/IPython/core/magics/execution.py</span> in <span class="ni">timeit</span><span class="nt">(self, line, cell, local_ns)</span>
<span class="g g-Whitespace">   </span><span class="mi">1167</span>             <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1168</span>                 <span class="n">number</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">index</span>
<span class="ne">-&gt; </span><span class="mi">1169</span>                 <span class="n">time_number</span> <span class="o">=</span> <span class="n">timer</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1170</span>                 <span class="k">if</span> <span class="n">time_number</span> <span class="o">&gt;=</span> <span class="mf">0.2</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1171</span>                     <span class="k">break</span>

<span class="nn">~/Development/workspaces/python3env/lib/python3.9/site-packages/IPython/core/magics/execution.py</span> in <span class="ni">timeit</span><span class="nt">(self, number)</span>
<span class="g g-Whitespace">    </span><span class="mi">167</span>         <span class="n">gc</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">168</span>         <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">169</span>             <span class="n">timing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inner</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">170</span>         <span class="k">finally</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">171</span>             <span class="k">if</span> <span class="n">gcold</span><span class="p">:</span>

<span class="nn">&lt;magic-timeit&gt;</span> in <span class="ni">inner</span><span class="nt">(_it, _timer)</span>

<span class="nn">&lt;ipython-input-1-452caf8b0569&gt;</span> in <span class="ni">fac</span><span class="nt">(n)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>         <span class="k">return</span> <span class="mi">1</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="k">else</span><span class="p">:</span>         <span class="c1"># Recursive case</span>
<span class="ne">----&gt; </span><span class="mi">5</span>         <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">fac</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Recursive call</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> 
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="n">fac</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="o">...</span> <span class="n">last</span> <span class="mi">1</span> <span class="n">frames</span> <span class="n">repeated</span><span class="p">,</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">frame</span> <span class="n">below</span> <span class="o">...</span>

<span class="nn">&lt;ipython-input-1-452caf8b0569&gt;</span> in <span class="ni">fac</span><span class="nt">(n)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>         <span class="k">return</span> <span class="mi">1</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="k">else</span><span class="p">:</span>         <span class="c1"># Recursive case</span>
<span class="ne">----&gt; </span><span class="mi">5</span>         <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">fac</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Recursive call</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> 
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="n">fac</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="ne">RecursionError</span>: maximum recursion depth exceeded in comparison
</pre></div>
</div>
</div>
</div>
<p>Der rekursive Aufruf ben√∂tigt ca. 8 Millisekunden, wohingegen die iterative Berechnung ca. 340 Nanosekunden ben√∂tigt.
Das hei√üt die iterative Berechnung ist um einen Faktor von</p>
<div class="math notranslate nohighlight">
\[\frac{8000}{340} \approx 24\]</div>
<p>schneller!</p>
</div>
<div class="section" id="endrekursionen-in-python">
<h2><span class="section-number">6.6.3. </span>Endrekursionen (in Python?)<a class="headerlink" href="#endrekursionen-in-python" title="Permalink to this headline">¬∂</a></h2>
<p>Der Laufzeitvergleich h√§ngt jedoch auch mit der verwendeten Programmiersprache zusammen.
Funktionale Sprachen bieten, zum Beispiel, das Konzept der optimierten <em>Endrekursion</em> (engl. <em>Tail Recursion</em>).</p>
<div class="admonition-endrekursion admonition" id="def-tail-recursion">
<p class="admonition-title">Endrekursion</p>
<p><em>Endrekursion</em>  ist eine bestimmte Form der Rekursion bei der der rekursive Aufruf einer Funktion auch ihre <strong>letzte Anweisung</strong> ist.</p>
</div>
<p>Trifft dies zu eliminieren die <a class="reference internal" href="../02-1/2-interpretation.html#def-compiler"><span class="std std-ref">Compiler</span></a> oder <a class="reference internal" href="../02-1/2-interpretation.html#def-interpreter"><span class="std std-ref">Interpreter</span></a> von funktionalen Sprachen die rekursiven Aufrufe der Funktion ‚Äì der <em>Stack</em> bleibt (bis auf einen Eintrag) leer.
Unsere <code class="docutils literal notranslate"><span class="pre">fac</span></code>-Funktion ist keine <em>Endrekursion</em>, denn nach dem rekursiven Aufruf wird die multipliziert.
Wir k√∂nnen daraus jedoch leicht eine <em>Endrekursion</em> machen:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fac_tail</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">acc</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fac_tail</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">acc</span><span class="o">*</span><span class="n">n</span><span class="p">)</span>

<span class="n">fac_tail</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Alle Arbeit ist getan und dann folgt der rekursive Aufruf.
Deshalb k√∂nnen wir eigentlich alle Namensr√§ume, welche auf dem <em>Stack</em> liegen vergessen.
Wir haben <code class="docutils literal notranslate"><span class="pre">n</span></code> bereits verarbeitet und brauchen es nicht mehr.
Deshalb belastet diese Rekursion den <em>Stack</em> nicht, sofern unser Compiler oder Interpreter dies auch optimiert.
Der <code class="docutils literal notranslate"><span class="pre">Python</span></code>-Interpreter optimiert dies nicht!
D.h. obwohl wir <code class="docutils literal notranslate"><span class="pre">n</span></code> vergessen k√∂nnten, wird es auf den <em>Stack</em> gelegt.
Warum sich die Entwickler*innen gegen <em>elimination von Endrekursionen</em> (engl. <em>Tail Recursion Elimination (TRE)</em>) entschieden haben hat verschiedene Gr√ºnde:</p>
<ul class="simple">
<li><p>TRE zerst√∂rt den sog. Stack Trace (wichtig f√ºr Fehlermeldungen)</p></li>
<li><p>TRE als Option w√ºrde Entwickler*innen motivieren die Rekursion h√§ufiger zu verwenden, doch w√ºrde der Code dann nicht √ºberall gleich effizient laufen</p></li>
<li><p>Entwickler*innen von <code class="docutils literal notranslate"><span class="pre">Python</span></code> glauben nicht an die Rekursion als Basis jeder Programmierung</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">Python</span></code> w√§re die Realisierung durch dessen Dynamik √§u√üerst kompliziert, hier ein einfaches Beispiel was bereits zu Problemen f√ºhrt:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">f</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span>
<span class="n">g</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Wir binden <code class="docutils literal notranslate"><span class="pre">g</span></code> an das erste <code class="docutils literal notranslate"><span class="pre">f</span></code>.
Dann aber definieren wir <code class="docutils literal notranslate"><span class="pre">f</span></code> neu.
Aus <code class="docutils literal notranslate"><span class="pre">g(5)</span></code> ruft das alte <code class="docutils literal notranslate"><span class="pre">f</span></code> auf, nennen wir es <code class="docutils literal notranslate"><span class="pre">f_old</span></code>.
Somit wird <code class="docutils literal notranslate"><span class="pre">g(5)</span></code> zu <code class="docutils literal notranslate"><span class="pre">f_old(5)</span></code> doch diese Funktion ruft nun das nicht rekursive neue <code class="docutils literal notranslate"><span class="pre">f</span></code> auf, d.h. <code class="docutils literal notranslate"><span class="pre">f(5-1)</span></code> wird zu <code class="docutils literal notranslate"><span class="pre">f(4)</span></code> wird zu <code class="docutils literal notranslate"><span class="pre">4</span></code>.
Wie soll der Interpreter mit protokollieren welche Funktionen rekursiv sind und welche nicht oder nicht mehr?</p>
<div class="warning admonition">
<p class="admonition-title">Endrekursion und Python</p>
<p><code class="docutils literal notranslate"><span class="pre">Python</span></code> optimiert bzw. eliminiert keine Endrekursion!</p>
</div>
<p>An diesem Beispiel wird deutlich, dass die Flexibilit√§t und Dynamik einer Sprache ihren Preis hat.
F√ºr Interpreter und Compiler wird es schwerer und schwerer Optimierungen durchzuf√ºhren!</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "BZoennchen/ct-book",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapters/03-6"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="5-nested-functions.html" title="previous page"><span class="section-number">6.5. </span>Umschlossene Funktionen</a>
    <a class='right-next' id="next-link" href="6-first-class-functions.html" title="next page"><span class="section-number">6.7. </span>First-Class-Funktion</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Benedikt Z√∂nnchen, Sarah Ottinger, Martin Hobelsberger<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>